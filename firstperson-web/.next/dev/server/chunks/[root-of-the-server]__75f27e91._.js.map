{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/saoriverse-console/firstperson-web/src/app/api/auth/login/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\n\r\nconst SUPABASE_URL = \"https://gyqzyuvuuyfjxnramkfq.supabase.co\";\r\nconst SUPABASE_ANON_KEY = process.env.SUPABASE_ANON_KEY || \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd5cXp5dXZ1dXlmanhtYW1rZnEiLCJyb2xlIjoiYW5vbiIsImlhdCI6MTcyODQwNjk2NiwiZXhwIjoyMDQ0Nzgyq2SLCJjb250ZXN0Ijp7ImF1dGhvcml6ZWQiOnRydWUsImhpZ2hfYXNzdXJhbmNlIjpmYWxzZX19.NzU0NjU5NjU3NjUyNjU2NTkyNjk2NTY5NjU2NTY1Ng\";\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const body = await request.json();\r\n    const { username, password } = body;\r\n\r\n    if (!username || !password) {\r\n      return NextResponse.json(\r\n        { success: false, error: \"Username and password are required\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    // Call Supabase auth-manager edge function\r\n    const response = await fetch(\r\n      `${SUPABASE_URL}/functions/v1/auth-manager`,\r\n      {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,\r\n        },\r\n        body: JSON.stringify({\r\n          action: 'login',\r\n          username,\r\n          password,\r\n        }),\r\n      }\r\n    );\r\n\r\n    const data = await response.json();\r\n\r\n    if (!response.ok) {\r\n      return NextResponse.json(\r\n        { success: false, error: data.error || 'Login failed' },\r\n        { status: response.status }\r\n      );\r\n    }\r\n\r\n    return NextResponse.json(data);\r\n  } catch (error) {\r\n    console.error('Login error:', error);\r\n    return NextResponse.json(\r\n      { success: false, error: 'Internal server error' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,eAAe;AACrB,MAAM,oBAAoB,QAAQ,GAAG,CAAC,iBAAiB,IAAI;AAEpD,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG;QAE/B,IAAI,CAAC,YAAY,CAAC,UAAU;YAC1B,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAO,OAAO;YAAqC,GAC9D;gBAAE,QAAQ;YAAI;QAElB;QAEA,2CAA2C;QAC3C,MAAM,WAAW,MAAM,MACrB,GAAG,aAAa,0BAA0B,CAAC,EAC3C;YACE,QAAQ;YACR,SAAS;gBACP,gBAAgB;gBAChB,iBAAiB,CAAC,OAAO,EAAE,mBAAmB;YAChD;YACA,MAAM,KAAK,SAAS,CAAC;gBACnB,QAAQ;gBACR;gBACA;YACF;QACF;QAGF,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAO,OAAO,KAAK,KAAK,IAAI;YAAe,GACtD;gBAAE,QAAQ,SAAS,MAAM;YAAC;QAE9B;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gBAAgB;QAC9B,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAO,OAAO;QAAwB,GACjD;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}